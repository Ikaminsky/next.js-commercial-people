{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Andersen\\\\Test\\\\frontend_test_ik-master\\\\src\\\\components\\\\Library\\\\LibraryTable.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useStore } from 'react-redux';\nimport { tableCells } from \"./config\";\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport { orderBy } from 'lodash';\n\nconst LibraryTable = () => {\n  const store = useStore();\n  const libraryFullData = useSelector(state => {\n    var _state$library, _state$library2;\n\n    console.log('state', (_state$library = state.library) === null || _state$library === void 0 ? void 0 : _state$library.fullData);\n    return (_state$library2 = state.library) === null || _state$library2 === void 0 ? void 0 : _state$library2.fullData;\n  });\n  const {\n    0: libraryData,\n    1: setLibraryData\n  } = useState([]);\n  const {\n    0: sortParameters,\n    1: setSortParameters\n  } = useState({\n    field: 'title',\n    order: 'asc'\n  });\n  const {\n    0: filterValue,\n    1: setFilterValue\n  } = useState('');\n  useEffect(() => {\n    var _store$getState$libra;\n\n    console.log('store!', (_store$getState$libra = store.getState().library) === null || _store$getState$libra === void 0 ? void 0 : _store$getState$libra.fullData); // let libraryFilteredData = !filterValue ? libraryFullData : libraryFullData.filter((item) => {\n    //   if (item.isbn.toString().toLowerCase().includes(filterValue)) {\n    //     return true\n    //   }\n    //   let authorsMails = '';\n    //   item.authors.forEach(author => {authorsMails += `${author.email} `});\n    //   return authorsMails.toLowerCase().includes(filterValue);\n    // });\n\n    let libraryFilteredData = libraryFullData;\n    libraryFilteredData && setLibraryData(orderBy(libraryFilteredData, sortParameters.field, sortParameters.order));\n  }, [libraryFullData, sortParameters, filterValue]);\n\n  const makeTableHeader = () => __jsx(\"div\", {\n    style: {\n      width: '100%',\n      borderBottom: '1px solid #e0e0e0',\n      padding: '8px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, tableCells.map((item, headerCellIndex) => __jsx(\"div\", {\n    style: _objectSpread(_objectSpread({}, item.cellStyle), {}, {\n      cursor: item.isSortable ? 'pointer' : 'auto'\n    }),\n    key: `library-table-header-${headerCellIndex}`,\n    onClick: e => {\n      e.stopPropagation();\n      item.isSortable && setSortParameters({\n        field: item.title,\n        order: sortParameters.order === 'asc' ? 'desc' : 'asc'\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, item.headerTitle, __jsx(\"span\", {\n    style: {\n      display: 'inline-block',\n      position: 'absolute',\n      right: '2px',\n      bottom: '-6px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, sortParameters.field === item.title ? sortParameters.order === 'asc' ? __jsx(ArrowUpwardIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 48\n    }\n  }) : __jsx(ArrowDownwardIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 70\n    }\n  }) : ''))));\n\n  const makeRowCellForObjectValue = (objectItem, rowIndex) => objectItem.value ? objectItem.value : __jsx(React.Fragment, null, objectItem.map((item, index) => __jsx(React.Fragment, {\n    key: `library-table-row-tooltip-cell-${rowIndex}-4-${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, __jsx(Tooltip, {\n    title: item.email,\n    interactive: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, item.firstname, \" \", item.lastname)))));\n\n  const makeTableRows = () => {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, libraryData === null || libraryData === void 0 ? void 0 : libraryData.map((item, rowIndex) => {\n      return __jsx(\"div\", {\n        key: `library-table-row-${rowIndex}`,\n        style: {\n          width: '100%',\n          borderBottom: '1px solid #e0e0e0 ',\n          display: 'flex',\n          alignItems: 'center',\n          padding: '8px 0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, tableCells.map((cell, cellIndex) => __jsx(\"div\", {\n        key: `library-table-row-cell-${rowIndex}-${cellIndex}`,\n        style: cell.cellStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }\n      }, typeof item[cell.title] !== 'object' ? item[cell.title] : makeRowCellForObjectValue(item[cell.title], rowIndex))));\n    }));\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    onChange: e => {\n      console.log(e.target.value);\n      setFilterValue(e.target.value);\n    },\n    value: filterValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), makeTableHeader(), makeTableRows());\n};\n\nexport default LibraryTable;","map":{"version":3,"sources":["D:/Work/Andersen/Test/frontend_test_ik-master/src/components/Library/LibraryTable.js"],"names":["React","useEffect","useState","useSelector","useStore","tableCells","Tooltip","ArrowUpwardIcon","ArrowDownwardIcon","orderBy","LibraryTable","store","libraryFullData","state","console","log","library","fullData","libraryData","setLibraryData","sortParameters","setSortParameters","field","order","filterValue","setFilterValue","getState","libraryFilteredData","makeTableHeader","width","borderBottom","padding","map","item","headerCellIndex","cellStyle","cursor","isSortable","e","stopPropagation","title","headerTitle","display","position","right","bottom","makeRowCellForObjectValue","objectItem","rowIndex","value","index","email","firstname","lastname","makeTableRows","alignItems","cell","cellIndex","target"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useStore } from 'react-redux'\r\nimport { tableCells } from './config';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport { orderBy } from 'lodash';\r\n\r\n\r\nconst LibraryTable = () => {\r\n\r\n  const store = useStore();\r\n  const libraryFullData = useSelector(state => {\r\n    console.log('state', state.library?.fullData);\r\n    return state.library?.fullData;\r\n  });\r\n  const [libraryData, setLibraryData] = useState([]);\r\n  const [sortParameters, setSortParameters] = useState({field: 'title', order: 'asc'});\r\n  const [filterValue, setFilterValue] = useState('');\r\n\r\n  useEffect(() => {\r\n    console.log('store!', store.getState().library?.fullData);\r\n\r\n    // let libraryFilteredData = !filterValue ? libraryFullData : libraryFullData.filter((item) => {\r\n    //   if (item.isbn.toString().toLowerCase().includes(filterValue)) {\r\n    //     return true\r\n    //   }\r\n    //   let authorsMails = '';\r\n    //   item.authors.forEach(author => {authorsMails += `${author.email} `});\r\n    //   return authorsMails.toLowerCase().includes(filterValue);\r\n    // });\r\n\r\n    let libraryFilteredData = libraryFullData;\r\n\r\n    libraryFilteredData && setLibraryData(orderBy(libraryFilteredData, sortParameters.field, sortParameters.order));\r\n  }, [libraryFullData, sortParameters, filterValue]);\r\n\r\n  const makeTableHeader = () => (\r\n    <div style={{width: '100%', borderBottom: '1px solid #e0e0e0', padding: '8px 0'}}>\r\n      {tableCells.map((item, headerCellIndex) => (\r\n        <div\r\n          style={{...item.cellStyle, cursor: item.isSortable? 'pointer' : 'auto'}}\r\n          key={`library-table-header-${headerCellIndex}`}\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            item.isSortable && setSortParameters({field: item.title, order: sortParameters.order === 'asc'? 'desc' : 'asc'});\r\n          }}\r\n        >\r\n          {item.headerTitle}\r\n          <span style={{display: 'inline-block', position: 'absolute', right: '2px', bottom: '-6px'}}>\r\n            {sortParameters.field === item.title ? (\r\n              sortParameters.order === 'asc' ? <ArrowUpwardIcon /> : <ArrowDownwardIcon />\r\n            ) : ''}\r\n          </span>\r\n        </div>\r\n      ))}\r\n    </div>);\r\n\r\n  const makeRowCellForObjectValue = (objectItem, rowIndex) => (\r\n    objectItem.value ? objectItem.value:\r\n      (<>{objectItem.map((item, index) => (\r\n      <React.Fragment key={`library-table-row-tooltip-cell-${rowIndex}-4-${index}`}>\r\n        <Tooltip title={item.email} interactive={true}>\r\n          <span>{item.firstname} {item.lastname}</span>\r\n        </Tooltip>\r\n      </React.Fragment>\r\n    ))}</>)\r\n  );\r\n\r\n  const makeTableRows = () => {\r\n    return (\r\n      <div>\r\n        {libraryData?.map((item, rowIndex) => {\r\n          return (\r\n            <div\r\n              key={`library-table-row-${rowIndex}`}\r\n              style={{width: '100%', borderBottom: '1px solid #e0e0e0 ', display: 'flex', alignItems: 'center', padding: '8px 0'}}\r\n            >\r\n              {tableCells.map((cell, cellIndex) => (\r\n                <div\r\n                  key={`library-table-row-cell-${rowIndex}-${cellIndex}`}\r\n                  style={cell.cellStyle}\r\n                >\r\n                  {typeof item[cell.title] !== 'object' ? item[cell.title] : makeRowCellForObjectValue(item[cell.title], rowIndex)}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <input onChange={(e) => {\r\n          console.log(e.target.value);\r\n          setFilterValue(e.target.value);\r\n        }}\r\n        value={filterValue}\r\n      />\r\n      {makeTableHeader()}\r\n      {makeTableRows()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LibraryTable;"]},"metadata":{},"sourceType":"module"}