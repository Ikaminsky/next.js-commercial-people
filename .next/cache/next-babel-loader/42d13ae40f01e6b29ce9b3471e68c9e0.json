{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/ilyakaminsky/Downloads/frontend_test_ikaminskii-master/src/components/Library/LibraryTable.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Button } from '@material-ui/core';\nimport { orderBy } from 'lodash';\nimport AddBookMagazineDialog from \"./AddBookMagazineDialog\";\nimport ExportDataDialog from \"./ExportDataDialog\";\nimport TableHeader from \"../Table/TableHeader\";\nimport TableRows from \"../Table/TableRows\";\nimport { LIBRARY_BUTTON, LIBRARY_STYLES, LIBRARY_WRAPPER_STYLES } from \"../../utils/consts\";\nimport { FilterInput } from \"../Table/FliterInput\";\n\nvar LibraryTable = function LibraryTable() {\n  _s();\n\n  var libraryFullData = useSelector(function (state) {\n    var _state$library;\n\n    return (_state$library = state.library) === null || _state$library === void 0 ? void 0 : _state$library.fullData;\n  });\n\n  var _useState = useState([]),\n      libraryData = _useState[0],\n      setLibraryData = _useState[1];\n\n  var _useState2 = useState({\n    field: 'title',\n    order: 'asc'\n  }),\n      sortParameters = _useState2[0],\n      setSortParameters = _useState2[1];\n\n  var _useState3 = useState(''),\n      filterValue = _useState3[0],\n      setFilterValue = _useState3[1];\n\n  var _useState4 = useState(false),\n      openAddBookMagazineDialogState = _useState4[0],\n      setOpenAddBookMagazineDialogState = _useState4[1];\n\n  var _useState5 = useState(false),\n      openExportDataDialogState = _useState5[0],\n      setOpenExportDataDialogState = _useState5[1];\n\n  useEffect(function () {\n    var libraryFilteredData = !filterValue ? libraryFullData : libraryFullData.filter(function (item) {\n      if (item.isbn.toString().toLowerCase().includes(filterValue.toLowerCase())) {\n        return true;\n      }\n\n      var authorsMails = '';\n      item.authors.forEach(function (author) {\n        authorsMails += \"\".concat(author.email, \" \");\n      });\n      return authorsMails.toLowerCase().includes(filterValue.toLowerCase());\n    });\n    libraryFilteredData && setLibraryData(orderBy(libraryFilteredData, sortParameters.field, sortParameters.order));\n  }, [libraryFullData === null || libraryFullData === void 0 ? void 0 : libraryFullData.length, sortParameters, filterValue]);\n\n  var closeAddBookMagazineDialog = function closeAddBookMagazineDialog() {\n    setOpenAddBookMagazineDialogState(false);\n  };\n\n  var openAddBookMagazineDialog = function openAddBookMagazineDialog() {\n    setOpenAddBookMagazineDialogState(true);\n  };\n\n  var closeExportDataDialog = function closeExportDataDialog() {\n    setOpenExportDataDialogState(false);\n  };\n\n  var openExportDataDialog = function openExportDataDialog() {\n    setOpenExportDataDialogState(true);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    style: LIBRARY_STYLES,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(FilterInput, {\n    filterValue: filterValue,\n    setFilterValue: setFilterValue,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    style: LIBRARY_WRAPPER_STYLES,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    onClick: openAddBookMagazineDialog,\n    variant: \"contained\",\n    style: LIBRARY_BUTTON,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, \"Add Book / Magazine\"), __jsx(Button, {\n    onClick: openExportDataDialog,\n    variant: \"contained\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, \"Export\"))), __jsx(TableHeader, {\n    sortParameters: sortParameters,\n    setSortParameters: setSortParameters,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), __jsx(TableRows, {\n    libraryData: libraryData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }), __jsx(AddBookMagazineDialog, {\n    openState: openAddBookMagazineDialogState,\n    onCloseCallback: closeAddBookMagazineDialog,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), __jsx(ExportDataDialog, {\n    openState: openExportDataDialogState,\n    onCloseCallback: closeExportDataDialog,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }));\n};\n\n_s(LibraryTable, \"joWP5jvUseZ9rXy75VzMIAt3TpE=\", false, function () {\n  return [useSelector];\n});\n\n_c = LibraryTable;\nexport default LibraryTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"LibraryTable\");","map":{"version":3,"sources":["/Users/ilyakaminsky/Downloads/frontend_test_ikaminskii-master/src/components/Library/LibraryTable.js"],"names":["React","useEffect","useState","useSelector","Button","orderBy","AddBookMagazineDialog","ExportDataDialog","TableHeader","TableRows","LIBRARY_BUTTON","LIBRARY_STYLES","LIBRARY_WRAPPER_STYLES","FilterInput","LibraryTable","libraryFullData","state","library","fullData","libraryData","setLibraryData","field","order","sortParameters","setSortParameters","filterValue","setFilterValue","openAddBookMagazineDialogState","setOpenAddBookMagazineDialogState","openExportDataDialogState","setOpenExportDataDialogState","libraryFilteredData","filter","item","isbn","toString","toLowerCase","includes","authorsMails","authors","forEach","author","email","length","closeAddBookMagazineDialog","openAddBookMagazineDialog","closeExportDataDialog","openExportDataDialog"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Button } from '@material-ui/core'\r\nimport { orderBy } from 'lodash'\r\nimport AddBookMagazineDialog from './AddBookMagazineDialog'\r\nimport ExportDataDialog from './ExportDataDialog'\r\nimport TableHeader from '../Table/TableHeader'\r\nimport TableRows from '../Table/TableRows'\r\nimport { LIBRARY_BUTTON, LIBRARY_STYLES, LIBRARY_WRAPPER_STYLES } from '../../utils/consts'\r\nimport { FilterInput } from '../Table/FliterInput'\r\n\r\nconst LibraryTable = () => {\r\n\r\n  const libraryFullData = useSelector(state => (state.library?.fullData))\r\n  const [libraryData, setLibraryData] = useState([])\r\n  const [sortParameters, setSortParameters] = useState({ field: 'title', order: 'asc' })\r\n  const [filterValue, setFilterValue] = useState('')\r\n  const [openAddBookMagazineDialogState, setOpenAddBookMagazineDialogState] = useState(false)\r\n  const [openExportDataDialogState, setOpenExportDataDialogState] = useState(false)\r\n\r\n  useEffect(() => {\r\n    let libraryFilteredData = !filterValue ? libraryFullData : libraryFullData.filter((item) => {\r\n      if (item.isbn.toString().toLowerCase().includes(filterValue.toLowerCase())) {\r\n        return true\r\n      }\r\n      let authorsMails = ''\r\n      item.authors.forEach(author => {authorsMails += `${author.email} `})\r\n      return authorsMails.toLowerCase().includes(filterValue.toLowerCase())\r\n    })\r\n\r\n    libraryFilteredData && setLibraryData(orderBy(libraryFilteredData, sortParameters.field, sortParameters.order))\r\n  }, [libraryFullData?.length, sortParameters, filterValue])\r\n\r\n  const closeAddBookMagazineDialog = () => {\r\n    setOpenAddBookMagazineDialogState(false)\r\n  }\r\n  const openAddBookMagazineDialog = () => {\r\n    setOpenAddBookMagazineDialogState(true)\r\n  }\r\n\r\n  const closeExportDataDialog = () => {\r\n    setOpenExportDataDialogState(false)\r\n  }\r\n  const openExportDataDialog = () => {\r\n    setOpenExportDataDialogState(true)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div style={LIBRARY_STYLES}>\r\n        <FilterInput\r\n          filterValue={filterValue}\r\n          setFilterValue={setFilterValue}\r\n        />\r\n        <div style={LIBRARY_WRAPPER_STYLES}>\r\n          <Button\r\n            onClick={openAddBookMagazineDialog}\r\n            variant=\"contained\"\r\n            style={LIBRARY_BUTTON}\r\n          >\r\n            Add Book / Magazine\r\n          </Button>\r\n          <Button\r\n            onClick={openExportDataDialog}\r\n            variant=\"contained\"\r\n          >\r\n            Export\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <TableHeader\r\n        sortParameters={sortParameters}\r\n        setSortParameters={setSortParameters}\r\n      />\r\n      <TableRows libraryData={libraryData}/>\r\n      <AddBookMagazineDialog\r\n        openState={openAddBookMagazineDialogState}\r\n        onCloseCallback={closeAddBookMagazineDialog}\r\n      />\r\n      <ExportDataDialog\r\n        openState={openExportDataDialogState}\r\n        onCloseCallback={closeExportDataDialog}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LibraryTable\r\n"]},"metadata":{},"sourceType":"module"}