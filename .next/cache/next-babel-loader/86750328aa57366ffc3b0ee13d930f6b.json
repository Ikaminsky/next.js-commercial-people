{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport const SET_LIBRARY_DATA = 'SET_LIBRARY_DATA';\nexport function setLibraryData(data) {\n  let payload = [].concat(data.books, data.magazines).map((item, index) => {\n    //join books and magazines to 1 array of objects\n    let authors = item.authors.split(',').map(authorMail => {\n      //get authors by book/magazine author mail\n      let currentAuthorsData = {};\n\n      for (let i = 0; i < data.authors.length; i++) {\n        if (data.authors[i].email === authorMail) {\n          currentAuthorsData = data.authors[i];\n          break;\n        }\n      }\n\n      return currentAuthorsData;\n    });\n    item.additionalData = {\n      //replace @description or @publishedAt with .additionalData\n      type: item.description ? 'description' : 'publishedAt',\n      value: item.description || item.publishedAt\n    };\n    delete item.description;\n    delete item.publishedAt;\n    return _objectSpread(_objectSpread({}, item), {}, {\n      authors\n    });\n  });\n  return {\n    type: SET_LIBRARY_DATA,\n    payload\n  };\n}","map":{"version":3,"sources":["D:/Work/Andersen/Test/frontend_test_ik-master/src/actions/library.js"],"names":["SET_LIBRARY_DATA","setLibraryData","data","payload","concat","books","magazines","map","item","index","authors","split","authorMail","currentAuthorsData","i","length","email","additionalData","type","description","value","publishedAt"],"mappings":";;;;;;AAAA,OAAO,MAAMA,gBAAgB,GAAG,kBAAzB;AAEP,OAAO,SAASC,cAAT,CAAyBC,IAAzB,EAA+B;AACpC,MAAIC,OAAO,GAAG,GAAGC,MAAH,CAAUF,IAAI,CAACG,KAAf,EAAsBH,IAAI,CAACI,SAA3B,EAAsCC,GAAtC,CAA0C,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAAI;AAC3E,QAAIC,OAAO,GAAGF,IAAI,CAACE,OAAL,CAAaC,KAAb,CAAmB,GAAnB,EAAwBJ,GAAxB,CAA6BK,UAAD,IAAgB;AAAI;AAC5D,UAAIC,kBAAkB,GAAG,EAAzB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,IAAI,CAACQ,OAAL,CAAaK,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5C,YAAIZ,IAAI,CAACQ,OAAL,CAAaI,CAAb,EAAgBE,KAAhB,KAA0BJ,UAA9B,EAA0C;AACxCC,UAAAA,kBAAkB,GAAGX,IAAI,CAACQ,OAAL,CAAaI,CAAb,CAArB;AACA;AACD;AACF;;AACD,aAAOD,kBAAP;AACD,KATa,CAAd;AAUAL,IAAAA,IAAI,CAACS,cAAL,GAAsB;AAAI;AACxBC,MAAAA,IAAI,EAAEV,IAAI,CAACW,WAAL,GAAmB,aAAnB,GAAmC,aADrB;AAEpBC,MAAAA,KAAK,EAAEZ,IAAI,CAACW,WAAL,IAAoBX,IAAI,CAACa;AAFZ,KAAtB;AAIA,WAAOb,IAAI,CAACW,WAAZ;AACA,WAAOX,IAAI,CAACa,WAAZ;AACA,2CACKb,IADL;AACWE,MAAAA;AADX;AAGD,GApBa,CAAd;AAqBA,SAAO;AACLQ,IAAAA,IAAI,EAAElB,gBADD;AAELG,IAAAA;AAFK,GAAP;AAID","sourcesContent":["export const SET_LIBRARY_DATA = 'SET_LIBRARY_DATA';\r\n\r\nexport function setLibraryData (data) {\r\n  let payload = [].concat(data.books, data.magazines).map((item, index) => {   //join books and magazines to 1 array of objects\r\n    let authors = item.authors.split(',').map((authorMail) => {   //get authors by book/magazine author mail\r\n      let currentAuthorsData = {};\r\n      for (let i = 0; i < data.authors.length; i++) {\r\n        if (data.authors[i].email === authorMail) {\r\n          currentAuthorsData = data.authors[i];\r\n          break;\r\n        }\r\n      }\r\n      return currentAuthorsData;\r\n    })\r\n    item.additionalData = {   //replace @description or @publishedAt with .additionalData\r\n      type: item.description ? 'description' : 'publishedAt',\r\n      value: item.description || item.publishedAt\r\n    };\r\n    delete item.description;\r\n    delete item.publishedAt;\r\n    return {\r\n      ...item, authors\r\n    }\r\n  });\r\n  return {\r\n    type: SET_LIBRARY_DATA,\r\n    payload\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}